{% extends 'base.html' %}
{% block title %}page_detail.html{% endblock %}

{% block content %}
    {% load static %}
    <!-- Page Content-->
    <section class="py-5">
        <div class="container px-5 my-5">
            <div class="row gx-5">
                <div class="col-lg-8">
                    <article>
                        <header class="mb-4">
                            <h2 class="fw-bolder fs-5 mb-4">{{ page.file }}의 {{ page.page_num }} 페이지 상세 화면</h2>
                        </header>
                        <figure class="mb-4">
                        <canvas id="canvas" width="480" height="640" style="border:1px solid #d3d3d3;">
                        Your browser does not support the HTML5 canvas tag.
                        </canvas>
                        <script type="text/javascript">
                        window.onload = function(){
                            var canvas = document.getElementById("canvas");
                            if(canvas.getContext){
                                var draw = canvas.getContext("2d");

                                var img = new Image();
                                img.src = "{% get_static_prefix %}upload/{{ page.file.id }}_{{ page.page_num }}.png";
                                img.onload = function(){
                                    //이미지의 원하는 부분만 잘라서 그리기
                                    //drawImage(이미지객체,
                                    //        이미지의 왼위 부분x, 이미지의 왼위 부분y, 이미지의 원하는 가로크기, 이미지의 원하는 세로크기,
                                    //        사각형 부분x, 사각형 부분y, 가로크기, 세로크기)
                                    //draw.drawImage(img, 100,100, 300,300, 50,50, 250,300);

                                    //전체 이미지 그리기
                                    //drawImage(이미지객체, 사각형 왼위 x, 사각형 왼위 y, 가로크기, 세로크기)
                                    draw.drawImage(img, 50,50, 250,300);
                                }
                            }
                        }
                        </script>
                        </figure>
                    </article>

                </div>
                <div class="col-lg-4">
                    <div class="d-flex align-items-center mt-lg-5 mb-4">
                        <a href="#" class="btn btn-warning btn-icon-split">
                            <span class="icon text-white-50">
                                <i class="fas fa-exclamation-triangle"></i>
                            </span>
                            <span class="text">다운로드</span>
                        </a>
                    </div>
                    <div class="card mb-4">
                        <div class="card-header">
                            최종결론
                        </div>
                        <div class="card-body">
                            {{ page.is_safe }}
                        </div>
                    </div>
                    <div class="card mb-4">
                        <div class="card-header">
                            판단근거
                        </div>
                        <div class="card-body">
                            {{ page.box_json }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


{% endblock %}